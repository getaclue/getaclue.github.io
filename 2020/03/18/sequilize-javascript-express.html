<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Jekyll v4.0.0" /><meta property="og:title" content="How to install Sequelize in ExpressJS app with SQLite" /><meta name="author" content="Alex Kluew" /><meta property="og:locale" content="en_US" /><meta name="description" content="In this article I will show you how to install Sequelize for use in a basic ExpressJS app with SQLite." /><meta property="og:description" content="In this article I will show you how to install Sequelize for use in a basic ExpressJS app with SQLite." /><link rel="canonical" href="getaclue.me/2020/03/18/sequilize-javascript-express" /><meta property="og:url" content="getaclue.me/2020/03/18/sequilize-javascript-express" /><meta property="og:site_name" content="Alex Kluew" /><meta property="og:image" content="https://cdn-std.droplr.net/files/acc_603419/d6bd0B" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-03-18T00:00:00-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:image" content="https://cdn-std.droplr.net/files/acc_603419/d6bd0B" /><meta property="twitter:title" content="How to install Sequelize in ExpressJS app with SQLite" /><meta name="twitter:site" content="@alexkluew" /><meta name="twitter:creator" content="@alexkluew" /><meta name="google-site-verification" content="j_0ua6jd1va4oFzra32KpYStOsNq9Ve98QboLI-LAN0" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Alex Kluew"},"description":"In this article I will show you how to install Sequelize for use in a basic ExpressJS app with SQLite.","url":"getaclue.me/2020/03/18/sequilize-javascript-express","headline":"How to install Sequelize in ExpressJS app with SQLite","dateModified":"2020-03-18T00:00:00-04:00","datePublished":"2020-03-18T00:00:00-04:00","@type":"BlogPosting","image":"https://cdn-std.droplr.net/files/acc_603419/d6bd0B","mainEntityOfPage":{"@type":"WebPage","@id":"getaclue.me/2020/03/18/sequilize-javascript-express"},"@context":"https://schema.org"}</script><title> How to install Sequelize in ExpressJS app with SQLite - Alex Kluew</title><link rel="shortcut icon" href="/favicon.png" /><link rel="alternate" type="application/atom+xml" title="Alex Kluew" href="/atom.xml" /><link rel="alternate" type="application/json" title="Alex Kluew" href="getaclue.me/feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="/sitemap.xml" /><meta name="google-site-verification" content="j_0ua6jd1va4oFzra32KpYStOsNq9Ve98QboLI-LAN0" /><link rel="canonical" href="getaclue.me/2020/03/18/sequilize-javascript-express" /><meta name="description" content="In this article I will show you how to install Sequelize for use in a basic ExpressJS app with SQLite." /><meta property="og:title" content="How to install Sequelize in ExpressJS app with SQLite" /><meta property="og:url" content="getaclue.me/2020/03/18/sequilize-javascript-express" /><meta property="og:site_name" content="getaclue.me/2020/03/18/sequilize-javascript-express" /><meta property="og:description" content="In this article I will show you how to install Sequelize for use in a basic ExpressJS app with SQLite." /><meta property="og:locale" content="en_US" /><meta name="twitter:description" content="In this article I will show you how to install Sequelize for use in a basic ExpressJS app with SQLite." /><meta property="og:type" content="article" /><meta property="og:image" content="https://cdn-std.droplr.net/files/acc_603419/d6bd0B" /><meta name="twitter:image" content="https://cdn-std.droplr.net/files/acc_603419/d6bd0B" /><meta property="article:tag" content="javascript" /><meta property="article:tag" content="nodejs" /><meta property="article:tag" content="sequelize" /><meta property="article:tag" content="expressjs" /><meta property="article:tag" content="sqlite" /><meta name="author" content="Alex Kluew" /><meta property="article:author" content="https://getaclue.me" /><meta property="article:publisher" content="https://getaclue.me" /><meta property="article:published_time" content="2020-03-18 19:40:32 +0000" /><meta property="article:modified_time" content="2020-03-18 19:40:32 +0000" /><meta property="og:type" content="website" /><meta name="twitter:title" content="Alex Kluew" /><meta name="twitter:card" content="summary" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@" /> <script> // Google Analytics (function(i, s, o, g, r, a, m) { i['GoogleAnalyticsObject'] = r; (i[r] = i[r] || function() { (i[r].q = i[r].q || []).push(arguments); }), (i[r].l = 1 * new Date()); (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]); a.async = 1; a.src = g; m.parentNode.insertBefore(a, m); })( window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga' ); ga('create', 'UA-106794469-1', 'auto'); ga('set', 'anonymizeIp', true); ga('send', 'pageview'); </script><style> @import url("https://rsms.me/inter/inter.css");*,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0;padding:0}html{font-family:"Inter", sans-serif}@supports (font-variation-settings: normal){html{font-family:"Inter var", sans-serif}}body{-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;line-height:1.75;font-size:1rem;color:#16171a}nav ul{border-right:10px solid #0074d9}a{color:#111111;text-decoration-skip-ink:auto;text-decoration:underline}pre{margin:0.5rem 0;padding:0.5rem}.post p{margin:0.5rem 0}.post h1,.post h2,.post h3,.post h4{margin:1rem 0}.post h2:first-child,.project h2:first-child,.photo h2:first-child{margin-top:0;font-size:2rem;line-height:1.5;font-style:italic}.meta{margin:2rem 0}code,pre{background:#efefef;color:#111111;border-radius:1em}code{padding:0.1rem;font-style:italic;color:#111111}pre code{border:none}pre{padding:1rem;overflow-x:auto}img{max-width:100%}hr{background:#0074d9;height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:0.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section,article{padding:1rem;max-width:100%}blockquote{font-style:italic;border-left:5px solid #0074d9;padding-left:1rem;background:#efefef;color:#111111;border-radius:1em}h1,h2,h3,h4,h5{line-height:1;margin:1rem 0;font-weight:600}article h2:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:0.5rem}.posts ul,header ul{list-style:none}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:0.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}main{display:flex;flex-wrap:wrap;max-width:60rem;margin:2rem auto;padding:1rem}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:10px solid #0074d9;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:0.5rem}}article{flex-basis:0;flex-grow:999;min-width:70%;display:flex;flex-direction:column}figcaption{font-size:smaller}hr{margin:1rem;border:5px solid #0074d9}</style></head><body><main role="main"><header role="banner"> <!--<h1 class="logo">Alex Kluew</h1>--><nav role="navigation"><ul><li><a href="/" >Writing</a></li><li><a href="/search" >Search</a></li><li><a href="/about" >About</a></li><li><a href="/projects" >Projects</a></li><li><a href="/now" >Now</a></li><li><a href="/atom.xml" >Rss</a></li></ul></nav></header><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "BlogPosting", "mainEntityOfPage": { "@type": "WebPage", "@id": "https://google.com/article" }, "headline": "In this article I will show you how to install Sequelize for use in a basic ExpressJS app with SQLite.", "image": { "@type": "ImageObject", "url": "https://cdn-std.droplr.net/files/acc_603419/d6bd0B" }, "author": { "@type": "Person", "name": "Alex Kluew" }, "datePublished": "2020-03-18 19:40:32 +0000" , "dateModified": "2020-03-18 19:40:32 +0000" , "dateCreated": "2020-03-16 19:33:52 +0000" } </script><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><h2 itemprop="name headline">How to install Sequelize in ExpressJS app with SQLite</h2><div itemprop="articleBody"><p>Our goal for this project is to see this :</p><p><img src="/assets/images/2020-03-18/goal-sequelize.png" alt="Connection established." style="max-width:100%" /></p><p>Start the project by making the src folder :</p><pre><code>cd dev/nodejs
mkdir LeAppWriteup
cd LeAppWriteup &amp;&amp; npm init
</code></pre><p>install the basic dependencies : express, <a href="https://sequelize.org/v5/manual/getting-started.html">sequelize</a>, and sqlite.</p><pre><code>npm install --save express
npm install --save sequelize
npm install --save sqlite3
</code></pre><p>I wanted to configure the database connection first, so I made a folder called <code>config</code> and a file for database <code>db.js</code>. In the file I wrote the following:</p><pre><code class="language-js">// config/db.js
const Sequelize = require("sequelize");

const db = new Sequelize({
  dialect: "sqlite",
  storage: "leappwriteup.sqlite3"
});

module.exports = db;
</code></pre><p>The configuration above basically follows the readme of the <a href="https://sequelize.org/v5/manual/getting-started.html">sequelize</a> project. We are injecting the sequelize project, then we are instantiating a sequelize object that will use sqlite as its database. After this, I was ready to test the connections. All of the basic building blocks are there. The server, the database, and the connector. We test all three by running the following code in the <code>index.js</code> file (our start file) :</p><pre><code class="language-js">// index.js
const express = require("express");
const router = express.Router();
const db = require("./config/db");

// start db
db.authenticate()
  .then(result =&gt; {
    console.log("Connection established.");
  })
  .catch(error =&gt; {
    console.log("Unable to connect to db: ", error);
  });

// start app
const app = express();

module.exports = app;
</code></pre><p>In the code above we are first injecting the dependent packages : express and database, the code for which is from our text above. We then call the database to establish a connection. If everything works as expected I will see <code>Connection established.</code> message. Otherwise, I will see the error for why it did not connect to the db. Finally, the express server is started and the entire app is exported for use elsewhere in the code.</p><blockquote><p>node index.js</p></blockquote><p>Run <code>node index.js</code> and see your progress. You should see the successful message. Congratulations, you have connected your server to the database and created an empty <code>sqlite3</code> database file. Otherwise, review your steps or send me a shout ;)</p><hr /><p>This part is totally optional. To interact with the database, we better start off with modeling our data as per <a href="https://sequelize.org/v5/manual/getting-started.html">sequelize</a> documents. I did it by creating the following file in the folder <code>models</code> :</p><pre><code>mkdir models
cd models &amp;&amp; touch user.js
</code></pre><p>I then created the following code in the <code>user.js</code> file :</p><pre><code class="language-js">// models/user.js
const sequelize = require("../config/db");
const { DataTypes } = require("sequelize");

const User = sequelize.define("User", {
  email: {
    type: DataTypes.STRING,
    allowNull: false
  },
  password: {
    type: DataTypes.TEXT,
    allowNull: false
  },
  username: {
    type: DataTypes.TEXT,
    allowNull: false
  },
  token: {
    type: DataTypes.TEXT,
    allowNull: false
  }
});

module.exports = User;
</code></pre><p>Finally, test all of the code together by interacting with the database. I will do so by creating a seed file and running it.</p><pre><code>touch ../config/db.seed.js
</code></pre><p>In the seed file I want to connect to the database and add one user to the database and save it. After doing that, I want to run my project again to ensure that the connection to the database is established.</p><pre><code class="language-js">// config/db.seed.js
const db = require("./db");
const User = require("../models/user");

const seed = async () =&gt; {
  await db.sync({ force: true });

  const password = 'M&lt;gC4[`Dqv}G``X"Tg4XDbRrmWR46/ca';
  const username = "getaclue";
  const email = "info@getaclue.me";
  const token = `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxIiwibmFtZSI6ImluZm9AZ2V0YWNsdWUubWUiLCJpYXQiOjE1MTYyMzkwMjJ9._lImbjluzsOJSy-hlDzEOasZRSd8YuQ_9hBmmCvSvp0`;

  User.create({
    password: password,
    email: email,
    username: username,
    token: token
  })
    .then(user =&gt; {
      console.log("seeded user", user);

      User.findOne({ where: { email: `${user.email}` } })
        .then(user =&gt; {
          console.log("found in db after adding");
          db.close();
        })
        .catch(error =&gt; {
          console.error("error looking for new user in db: ", error);
          db.close();
        });
    })
    .catch(error =&gt; {
      console.error("failed to seed, ", error);
      db.close();
    });
};

seed();
</code></pre><p>Once everything is typed out, you can feel free to test everything once again. I ran the follow commands and made sure everything worked as expected.</p><pre><code>node config/db.seed.js
node index.js
</code></pre><p>Here is what your final folder structure should look like :</p><p><img src="/assets/images/2020-03-18/final_file_structure.png" alt="Final file structure" style="max-width:100%" /></p><p>I have installed <a href="https://sequelize.org/v5/manual/getting-started.html">Sequelize</a> and SQLite in my ExpressJS project; established the connection between ExpressJS and SQLite via <a href="https://sequelize.org/v5/manual/getting-started.html">Sequelize</a>; created Userâ€™s table, added some data, and queried that data. From here on, steps like building out the api; authentication; and authorization can proceed.</p></div><span class="meta" ><time itemprop="datePublished" datetime="2020-03-18T00:00:00-04:00" >March 18, 2020</time > &middot; <a href="/tag/javascript">javascript</a>, <a href="/tag/nodejs">nodejs</a>, <a href="/tag/sequelize">sequelize</a>, <a href="/tag/expressjs">expressjs</a>, <a href="/tag/sqlite">sqlite</a></span > <!--<span class="meta"><time datetime="2020-03-18T00:00:00-04:00">March 18, 2020</time> &middot; <a class="post" href="/tag/javascript">javascript</a>, <a class="post" href="/tag/nodejs">nodejs</a>, <a class="post" href="/tag/sequelize">sequelize</a>, <a class="post" href="/tag/expressjs">expressjs</a>, <a class="post" href="/tag/sqlite">sqlite</a></span> --></article></main><script async src="https://www.googletagmanager.com/gtag/js?id=UA-106794469-1" ></script> <script> function gtag() { dataLayer.push(arguments); } (window.dataLayer = window.dataLayer || []), gtag("js", new Date()), gtag("config", "UA-106794469-1", { anonymize_ip: !0 }); </script></body></html>
